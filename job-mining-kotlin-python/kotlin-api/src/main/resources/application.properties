spring.application.name=kotlin-api

# Hinzuf�gen des PostgreSQL-Dialekts zur Fehlerbehebung
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# Vergewissern Sie sich, dass diese drei Zeilen exakt so gesetzt sind:
# docker und localhost finden sich nicht
#spring.datasource.url=jdbc:postgresql://localhost:5432/jobmining_db
# ${DB_HOST:localhost} bedeutet: Nimm die Environment-Variable DB_HOST; wenn sie nicht da ist (Start in IntelliJ), nimm 'localhost'.
# Der Port ist 5432.
spring.datasource.url=jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/jobmining_db
spring.datasource.username=jobmining_user
spring.datasource.password=secret_password

# NEUE, SAUBERE KONFIGURATION:
# 1. Deaktiviert Hibernate's fehleranf�lliges, automatisches Erstellen/Updaten
#(Hinweis: F�r die Produktion w�rde man validate oder none verwenden, aber f�r die Entwicklung mit Flyway ist update ideal.)
spring.jpa.hibernate.ddl-auto=none

# 2. FLYWAY AKTIVIEREN UND KONFIGURIEREN
spring.flyway.enabled=true
# Flyway f�hrt Migrationen auch auf einer leeren Datenbank durch (wichtig f�r den ersten Start)
spring.flyway.baseline-on-migrate=true

# ? KRITISCHER FIX: Flyway Debug Logging aktivieren
logging.level.org.flywaydb=DEBUG
# Repariere kaputte Eintr�ge
spring.flyway.repair-on-migrate=true

# Zeigt detaillierte Infos (z.B. ob Postgres erreichbar ist)
management.endpoint.health.show-details=always
# Aktiviert den speziellen Datenbank-Check
management.health.db.enabled=true

# Setzt den Flyway-Suchpfad auf den Ordner "migration" direkt unter "resources"
spring.flyway.locations=classpath:/migration

spring.servlet.multipart.max-request-size=5MB
spring.servlet.multipart.max-file-size=5MB

# In application.properties
app.data.base-path=/app/data

# In application.properties
# Korrigiere den Pfad so, dass er von der kotlin-api aus das python-backend Verzeichnis findet
#app.esco.data-path=${ESCO_DATA_PATH:../python-backend/data/esco}

# 1. Er sucht erst im Hauptverzeichnis (IntelliJ-Pfeil)
# 2. Wenn das nicht klappt, sucht er eine Ebene h�her (Gradle Terminal)
app.esco.data-path=${ESCO_DATA_PATH:./python-backend/data/esco}
# F�r lokalen Start (IntelliJ):
#app.esco.data-path=./python-backend/data/esco
# Absolute Pfadangabe f�r maximale Stabilit�t
#app.esco.data-path=/Users/layher-ad/IdeaProjects/job-mining-kotlin-python/python-backend/data/esco

# ============================================================================
# SWAGGER UI / SPRINGDOC CONFIGURATION (Fix f�r Codespaces/CORS)
# ============================================================================
# Aktiviert Forwarded Headers (wichtig f�r Proxy/Codespaces)
server.forward-headers-strategy=framework

# Swagger UI auf relative URLs konfigurieren (kein localhost)
springdoc.swagger-ui.disable-swagger-default-url=true
springdoc.swagger-ui.url=/v3/api-docs
springdoc.swagger-ui.config-url=/v3/api-docs/swagger-config

# API Docs Pfad
springdoc.api-docs.path=/v3/api-docs
